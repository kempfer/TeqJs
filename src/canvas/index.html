<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Teq Canvas Lib</title>
		<script type="text/javascript"  src="../Teq.js"></script>		
		<script type="text/javascript"  src="../plugins/TeqArray.js"></script>
		<script type="text/javascript"  src="../plugins/TeqDom.js"></script>
		<script type="text/javascript"  src="../plugins/TeqNumber.js"></script>
		<script type="text/javascript"  src="../plugins/TeqObject.js"></script>
		<script type="text/javascript"  src="../plugins/TeqString.js"></script>	
		<script type="text/javascript"  src="../plugins/TeqClass.js"></script>								
		<script type="text/javascript"  src="../plugins/TeqBasesClass.js"></script>	
		<script type="text/javascript"  src="../plugins/TeqPromise.js"></script>	
		<script type="text/javascript"  src="../plugins/TeqAnimation.js"></script>
		<script type="text/javascript"  src="TCanvas.js"></script>		
		<script type="text/javascript"  src="TCanvasObj.js"></script>	
		<script type="text/javascript"  src="TCanvasRect.js"></script>	
		<script type="text/javascript"  src="TCanvasCircle.js"></script>
		<script type="text/javascript"  src="TCanvasTriangle.js"></script>
		<script type="text/javascript"  src="TCanvasEllipse.js"></script>
		<script type="text/javascript"  src="TCanvasLine.js"></script>
		<script type="text/javascript"  src="TCanvasImage.js"></script>
		<script type="text/javascript"  src="TCanvasPolygon.js"></script>
		
		
	</head>
	<body>
		<canvas id="canvas" style="border: 1px solid;"> </canvas>
		<div id="test"> </div>
		<canvas id="canvas-2" style="border: 1px solid;"> </canvas>
		<script>
			var canvas;
			var canvas2;
			var rect;
			var rect2;
			var circle;
			var triangle;
			var ellipse;
			var circle2;
			var line; 
			var image;
			var polygon;
			var cloneRect;
			t.dom.onReady(function () {
				canvas = new t.canvas('#canvas');	
				canvas.width = 400;			
				canvas.height = 400;				
				canvas.renderTo("#test");
				rect = new t.canvas.rect({x:0,y:0, angle : 0});
				rect2 = new t.canvas.rect({
					width:50,
					x:20,
					y:100,
					angle:0,
					fill:'red',
					strokeStyle : 'blue',
					strokeWidth : 5
				});
				circle = new t.canvas.circle({
					fill : 'green',
					x : 70,
					y: 50,
					strokeStyle : 'blue',
					radius : 20,
					strokeWidth : 3,
					opacity: 0.1,
					end : 270
				});
				triangle = new t.canvas.triangle({
					x: 100,
					y: 100,
					angle:0,
					strokeStyle : 'blue',
					strokeWidth : 5
				});
				ellipse = new t.canvas.ellipse({
					x: 170,
					y: 100,
					xRadius: 40,
					yRadius: 20,
					angle:45,
					strokeStyle : 'blue',
					strokeWidth : 5,
					end : 360
				});
				circle2 = new  t.canvas.circle({
					x: 170,
					y: 100,
					fill:'#000'
				});
				line = new t.canvas.line({
					x : 170,
					y : 30,
					x2 : 200,
					y2: 30,
					angle:-10
				});
				image = new t.canvas.image({
					x : 200,
					y : 30,     
					//angle:45,
					flipX : true
				});
				polygon = new t.canvas.polygon({
					points : [
						{x : 200,y : 200},
						{x : 250,y : 210},
						{x : 280,y : 150},	
						{x : 250,y : 150}
					],
					strokeStyle : 'green',
					strokeWidth : 5,
					opacity: 0.2,
				});
				cloneRect = rect.clone();
				cloneRect.set('x',50);
				image.on('render', function () {
					console.log('render ' + this.name);
					console.log('render');
				});
				image.on('change', function (name) {
					console.log('chnage -> ' + name);
				});
				canvas.add(rect,rect2,circle,triangle,ellipse,circle2,line,polygon,cloneRect);
				canvas.renderAll();

			
				canvas2 = t.dom("#canvas-2").first.getContext('2d');
				cloneRect.renderTo(canvas2);
				t.animation({
					startValue : 100,
					endValue : 300,
					duration: 10000,
					onChange : function (value) {
						triangle.set('y',value);
						canvas.renderAll();
					},
					onComplete : function () {
						console.log('onComplete');
					},
				});
				/*var anim = t.animation({
					startValue : 1,
					endValue : 0,
					duration: 5000,
					onChange : function (value) {
						triangle.set('opacity',value);
						canvas.renderAll();						
					},
					onComplete : function () {
						console.log('onComplete');
					},
					onAbort : function () {
						console.log('onAbort');
					}
				});*/
				setTimeout (function () {
					console.log('setTimeout');
				},10000);
				//setInterval(function () {animal(image)},100);
				//setInterval(function () {animal(line)},100);
				//setInterval(function () {animal(circle)},100);
				
			});
			var angle = 0;
			function animal (obj) {
				if(angle == 360 ) {
					angle = 0;
				}
				angle++;
				obj.set('angle',angle);
				canvas.renderAll();
			}
			
		</script>
	</body>
</html>